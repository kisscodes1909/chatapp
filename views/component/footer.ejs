

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        
        const siteUrl = '<%= siteUrl; %>';

        $(()=>{


            const socket = io();

            getMessage((message)=>{
                addMessage(message);
            });

            socket.on('message', addMessage);

            $("#send").click(()=>{
                //addMessage({name: "John", message: "Hello World!"});
                let messsage = {
                    name: $("#name").val(),
                    message: $("#message").val()
                }

                postMessage(messsage)
            });
        });

        function addMessage(message) {
            $("#messages").append(`<h4> ${message.name} </h4> <p>${message.message}</p>`)
        }

        function getMessage(displayMessage) {
            console.log(`//${siteUrl}/messages`);
            $.get(`//${siteUrl}/messages`, (messages)=>{
                messages.forEach(message => {
                    displayMessage(message)
                });
            });
        }

        function postMessage(message) {
            $.post(`//${siteUrl}/messages`, message);
        }
    </script> 
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->
</body>
</html>